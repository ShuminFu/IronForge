# Environment

Before docker started, these variables must be set:

``MYDOMAIN``: Domain name. The tcp ports 80 and 443 of the created docker container should be accessible through the domain specified.

``REDIRECTDOMAIN``: A domain name as the redirection target, like ``www.microsoft.com``. There should be an SSL site of this domain online. All web accessing to ``MYDOMAIN`` will be redirected to the domain specified.

``REALITYCLIENTS``: Id list to be used to build the array ``clients`` in ``settings`` for ``reality``, like ``d76abab0-fd53-4ad6-813b-7a3a1ec6afb1``. UUID can be generated by ``xray uuid``. When ``flow`` is required, append it in ``[]`` after id, like ``d76abab0-fd53-4ad6-813b-7a3a1ec6afb1[xtls-rprx-vision]``. When multple ids required, separates them with commars, like ``ba1ee0e7-fc74-4596-9d68-169ee834248a[xtls-rprx-vision],c7d7e6b2-eb7c-41e8-80f1-d6f881bb3746``.

``REALITYPRIVATEKEY``: The private key to be used as the ``privateKey`` in ``streamSettings`` for ``reality``.

``GRPCCLIENTS``: Id list to be used to build the array ``clients`` in ``settings`` for ``grpc``, like ``d76abab0-fd53-4ad6-813b-7a3a1ec6afb1``. UUID can be generated by ``xray uuid``. When multple ids required, separates them with commars, like ``ba1ee0e7-fc74-4596-9d68-169ee834248a,c7d7e6b2-eb7c-41e8-80f1-d6f881bb3746``.

These variables are optional but strongly recommended to specify your own values.

``GRPCSERVICE``: Grpc service name to be used in nginx. Default is ``MyFirstService``.

``EMAIL``: Email address to be used in acme.sh. Default is ``webadmin@microsoft.com``.

These variables are optional:

``SERVERIP``: Value of ``listen``. Default is ``0.0.0.0``.

``SERVERPORT``: Value of ``port``. Default is ``443``.

``REALITYSHOW``: Value of ``show`` in ``realitySettings`` of ``streamSettings``. Default is ``false``.

``REALITYMINCLIENTVER``: Value of ``minClientVer`` in ``realitySettings`` of ``streamSettings``. Format is ``x.y.x``. Default is empty string.

``REALITYMAXCLIENTVER``: Value of ``maxClientVer`` in ``realitySettings`` of ``streamSettings``. Format is ``x.y.x``. Default is empty string.

``REALITYMAXTIMEDIFF``: Value of ``maxTimeDiff`` in ``realitySettings`` of ``streamSettings`` in milliseconds. Default is ``0``.

``REALITYSHORTIDS``: Id list to be used to build the array ``shortId`` in ``realitySettings`` of ``streamSettings``. Each id is not larger than 8 bytes and encoded in hex. When multple id required, separates them with commars, like ``,0123456789abcdef``. Default is empty string which will be converted to one element with no content ``""``.



# Keys

To generate private and public key pair, use ``xray x25519``.

# Certificate

Certificate files for ``MYDOMAIN`` are prepared automatically using acme.sh. To keep these files, mount a volume to ``/root/.acme.sh/``.
